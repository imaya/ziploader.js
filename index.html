<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta name="description" content="Ziploader.js : Zip Container Loader" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/prettify.css">
    <script src="javascripts/ziploader.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var zl = new ZipLoader();
        zl.applyElementAll('img[data-ziploader-archive]', 'src');
      }, false);
    </script>

    <title>Ziploader.js</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/imaya/ziploader.js">View on GitHub</a>

          <h1 id="project_title">Ziploader.js</h1>
          <h2 id="project_tagline">Zip Container Loader</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/imaya/ziploader.js/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/imaya/ziploader.js/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<!-- content -->
        <h1>ziploader.js</h1>
        <p>ziploader.js は ZIP 形式のファイルを読み込み、DOM に適用するためのライブラリです。</p>
        <h2>CSS スプライトの代わりに</h2>
        <p>CSS スプライトは複数の画像を一つのスプライトマップにまとめる事により HTTP 通信の回数を減らす、Web サイトの最適化の中ではもっとも知られている手段の一つです。<br>一つの画像にまとめる事が出来る反面、本来の画像である img 要素ではなく要素の背景として実現されます。</p>
        <p>ziploader.js では、zip ファイルを読み込んだ後に個々の img 要素の src 属性を書き換えて表示するため、img 要素のまま扱う事ができます。<br>また、それぞれ別の画像になっているため、個別に拡大や縮小して表示することも可能です。</p>
        <p>以下は SVG を一つの zip ファイルにまとめ、それを表示しているものです。<br>（開発者ツールで確認してみると実際に zip ファイルしかダウンロードしていないことが分かるでしょう）</p>

        <!-- svg zip -->
        <img data-ziploader-archive="images/svg32.zip" data-ziploader-filename="access_bus.svg" width="4" height="4">
        <img data-ziploader-archive="images/svg32.zip" data-ziploader-filename="access_train.svg" width="8" height="8">
        <img data-ziploader-archive="images/svg32.zip" data-ziploader-filename="access_walk.svg" width="16" height="16">
        <img data-ziploader-archive="images/svg32.zip" data-ziploader-filename="arrow_c_down.svg" width="32" height="32">
        <img data-ziploader-archive="images/svg32.zip" data-ziploader-filename="arrow_c_left.svg" width="64" height="64">
        <img data-ziploader-archive="images/svg32.zip" data-ziploader-filename="arrow_c_right.svg" width="128" height="128">
        <img data-ziploader-archive="images/svg32.zip" data-ziploader-filename="arrow_c_up.svg" width="256" height="256">
        <!-- svg zip -->

        <p>これらの画像は元はすべて 32x32 の SVG 画像です。</p>
        <p>これは、以下のように HTML と JavaScript を記述するだけです。</p>
        <h3>HTML</h3>
        <p>まず、data-ziploader-archive 属性には zip ファイルの URL を記述します。<br>そして、data-ziploader-filename 属性には zip ファイル内のファイル名を書きます。</p>
<pre><code class="lang-html">&lt;img data-ziploader-archive=&quot;images/svg32.zip&quot; data-ziploader-filename=&quot;access_bus.svg&quot; width=&quot;4&quot; height=&quot;4&quot;&gt;
&lt;img data-ziploader-archive=&quot;images/svg32.zip&quot; data-ziploader-filename=&quot;access_train.svg&quot; width=&quot;8&quot; height=&quot;8&quot;&gt;
&lt;img data-ziploader-archive=&quot;images/svg32.zip&quot; data-ziploader-filename=&quot;access_walk.svg&quot; width=&quot;16&quot; height=&quot;16&quot;&gt;
&lt;img data-ziploader-archive=&quot;images/svg32.zip&quot; data-ziploader-filename=&quot;arrow_c_down.svg&quot; width=&quot;32&quot; height=&quot;32&quot;&gt;
&lt;img data-ziploader-archive=&quot;images/svg32.zip&quot; data-ziploader-filename=&quot;arrow_c_left.svg&quot; width=&quot;64&quot; height=&quot;64&quot;&gt;
&lt;img data-ziploader-archive=&quot;images/svg32.zip&quot; data-ziploader-filename=&quot;arrow_c_right.svg&quot; width=&quot;128&quot; height=&quot;128&quot;&gt;
&lt;img data-ziploader-archive=&quot;images/svg32.zip&quot; data-ziploader-filename=&quot;arrow_c_up.svg&quot; width=&quot;256&quot; height=&quot;256&quot;&gt;</code></pre>
        <h3>JavaScript: data-archive 属性を持つ img 要素をすべて ziploader.js で処理する</h3>
        <pre><code class="lang-js"><span class="pln">document</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'DOMContentLoaded'</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="kwd">function</span><span class="pun">()</span><span class="pln">&nbsp;</span><span class="pun">{</span><br><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">var</span><span class="pln">&nbsp;zl&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">new</span><span class="pln">&nbsp;</span><span class="typ">ZipLoader</span><span class="pun">();</span><br><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;zl</span><span class="pun">.</span><span class="pln">applyElementAll</span><span class="pun">(</span><span class="str">'img[data-ziploader-archive]'</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="str">'src'</span><span class="pun">);</span><br><span class="pun">},</span><span class="pln">&nbsp;</span><span class="kwd">false</span><span class="pun">);</span></code></pre>
        <h2>開発時は zip ではなく直接ファイルを参照</h2>
        <p>開発時に毎回 zip を作り直していたのでは大変です。<br>そこで、開発用にビルドされた js ファイルを代わりに使用することで zip ファイルと同名のディレクトリからファイルを直接参照することができます。<br>例えば、上記の例では</p>
        <ul>
<li>images/svg32.zip/access_bus.svg</li>
</ul>
<p>のようにファイルを配置しておけば、そのまま画像が表示されます。</p>
<h2>SVG 未対応環境の PNG へのフォールバック</h2>
<p>Android 2.x では SVG の表示が出来ないため、かわりに PNG ファイルを表示したいこともあると思います。<br>そういった場合でも ZipLoader#setSVGFallback(true); のようにしてから applyElementAll をすることで、拡張子が .svg のものは未対応端末では自動で同名の拡張子を .png に置き換えたものをロードします。</p>



<!-- content -->
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Ziploader.js maintained by <a href="https://github.com/imaya">imaya</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
